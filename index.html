
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#runs" class="toc-h1 toc-link" data-title="Runs">Runs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-2" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#creating-a-new-run" class="toc-h2 toc-link" data-title="Creating a new run">Creating a new run</a>
                  </li>
                  <li>
                    <a href="#getting-all-runs" class="toc-h2 toc-link" data-title="Getting all runs">Getting all runs</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-run" class="toc-h2 toc-link" data-title="Get a specific run">Get a specific run</a>
                  </li>
                  <li>
                    <a href="#uploading-input-files" class="toc-h2 toc-link" data-title="Uploading input files">Uploading input files</a>
                  </li>
                  <li>
                    <a href="#uploading-input-files-from-url" class="toc-h2 toc-link" data-title="Uploading input files from URL">Uploading input files from URL</a>
                  </li>
                  <li>
                    <a href="#selecting-your-compute-option" class="toc-h2 toc-link" data-title="Selecting your compute option">Selecting your compute option</a>
                  </li>
                  <li>
                    <a href="#starting-your-wrf-run" class="toc-h2 toc-link" data-title="Starting your WRF run">Starting your WRF run</a>
                  </li>
                  <li>
                    <a href="#stopping-your-wrf-run" class="toc-h2 toc-link" data-title="Stopping your WRF run">Stopping your WRF run</a>
                  </li>
                  <li>
                    <a href="#deleting-your-wrf-run" class="toc-h2 toc-link" data-title="Deleting your WRF run">Deleting your WRF run</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:accounts@cloudrun.co'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Cloudrun API!</p>

<p>We have language bindings in for shell (using curl) and Python!
You can view code examples in the dark area to the right,
and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authenticate, use this code:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">cloudrun</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="s">'https://api.cloudrun.co/v1'</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With curl, pass the authentication header with each request</span>
curl https://api.cloudrun.co/v1/runs <span class="se">\</span>
    -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p>Make sure to set the <code>token</code> parameter to your API token.</p>
</blockquote>

<p>Cloudrun uses API tokens to allow access to the API.
You can reqest a new Cloudrun API token via e-mail at
<a href="mailto:accounts@cloudrun.co">accounts@cloudrun.co</a>.</p>

<p>Cloudrun expects for the API token to be included in all API requests to the
server in a header that looks like this:</p>

<p><code>Authorization: Bearer $token</code></p>

<aside class="notice">
<code>token</code> environment variable must be set to your personal API token.
</aside>
<h1 id='runs'>Runs</h1><h2 id='introduction-2'>Introduction</h2>
<p>A <em>run</em> is the main Cloudrun resource that you will be working with.
It allows you to set the parameters of your model run, upload input files,
start and stop a run, download output files, or sample model output.</p>
<h2 id='creating-a-new-run'>Creating a new run</h2><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">cloudrun</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="s">'https://api.cloudrun.co/v1'</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
<span class="n">run</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s">'wrf'</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">'3.9.1'</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST https://api.cloudrun.co/v1/runs <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     -F <span class="s2">"model=wrf"</span> <span class="se">\</span>
     -F <span class="s2">"version=3.9.1"</span>
</code></pre>
<p>This endpoint creates a new WRF run, and will return the <code>Run</code> JSON object
in the response.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.cloudrun.co/v1/runs</code></p>
<h3 id='form-parameters'>Form parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>model</td>
<td>Name of model to use</td>
</tr>
<tr>
<td>version</td>
<td>Model version to use</td>
</tr>
</tbody></table>

<aside class="notice">
The only model option currently supported is `wrf`.
</aside>

<aside class="notice">
Only WRF versions 3.8.1, 3.9, and 3.9.1 are currently supported.
</aside>
<h3 id='response'>Response</h3>
<p>The response body contains the Run object.</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"compute_config"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"compute_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"disk_usage"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cac65d8d-5b91-4fc9-b1b7-8096aa1f3c9e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"input_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wrf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"output_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"percent_complete"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"remaining_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"required_input_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"namelist.input"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"run_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"selected_compute_option"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-21T02:16:59.707338Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_stopped"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.9.1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Most <code>runs</code> endpoints return a <code>Run</code> object in JSON format in the response body.
See an example response on the right.  </p>

<ul>
<li><strong>compute_config</strong>: Optional compute settings to use instead of <code>selected_compute_option</code>.</li>
<li><strong>compute_options</strong>: A list of dictionaries that can contain multiple options
of parallel cores to use, compute cost, and estimated run time. Simulations
using more parallel cores can finish in less time, but also cost more.
Each dictionary contains the following fields:

<ul>
<li><strong>cores</strong>: number of parallel cores (CPUs) to use for the simulation.</li>
<li><strong>cost</strong>: compute cost in US dollars. Your account will be charged with this
amount at when the simulation is finished.</li>
<li><strong>time</strong>: estimated run time in seconds.</li>
</ul></li>
<li><strong>disk_usage</strong>: Total disk usage by your run.</li>
<li><strong>error</strong>: A dictionary with error status and message. <code>null</code> if no error.</li>
<li><strong>id</strong>: Unique run id.</li>
<li><strong>input_files</strong>: A list of dictionaries, one for each input file. Each dictionary contains fields:

<ul>
<li><strong>fileid</strong>: Unique input file id.</li>
<li><strong>filename</strong>: Input file name.</li>
<li><strong>size</strong>: File size in bytes.</li>
</ul></li>
<li><strong>model</strong>: A dictionary with the following fields:</li>
<li><strong>output_files</strong>: A list of dictionaries, one for each output_file.
Each dictionary contains the following fields:

<ul>
<li><strong>filename</strong>: Output file name.</li>
<li><strong>size</strong>: File size in bytes.</li>
</ul></li>
<li><strong>output_size</strong>: Total output size in bytes.</li>
<li><strong>percent_complete</strong>: Current percentage of simulation complete.
<code>null</code> if run not yet started, and <code>100.0</code> if complete.</li>
<li><strong>remaining_time</strong>: Remaining time in seconds until complete.
<code>null</code> if run not yet started, and <code>0</code> if complete.</li>
<li><strong>required_input_files</strong>: A list of required input files that must be uploaded
before starting the run.</li>
<li><strong>run_name</strong>: Name for your run.</li>
<li><strong>selected_compute_option</strong>: An ID used to select one of the available compute options.</li>
<li><strong>status</strong>: A status string that can have one of the following values:

<ul>
<li><code>created</code>: A run resource has been successfully created but not started.</li>
<li><code>ready</code>: The run resource is configured and waiting for user request to start.</li>
<li><code>starting</code>: The run resource received user request to start, and is in the
process of spinning up compute nodes and uploading files.</li>
<li><code>active</code>: The run is currently in progress.</li>
<li><code>stopped</code>: The run was stopped by the user before completion.</li>
<li><code>done</code>: The run was successfully completed.</li>
<li><code>error</code>: The run encountered an error and has stopped. See the <em>error</em> field for more information.</li>
</ul></li>
<li><strong>time_created</strong>: Time when the run resource was created. The time is in UTC and
using ISO 8601 standard, <code>%Y-%m-%d_%H:%M:%S</code>.</li>
<li><strong>time_started</strong>: Time when the run resource was started. The time is in UTC and
using ISO 8601 standard, <code>%Y-%m-%d_%H:%M:%S</code>.</li>
<li><strong>time_stopped</strong>: Time when the run resource stopped. The time is in UTC and
using ISO 8601 standard, <code>%Y-%m-%d_%H:%M:%S</code>.</li>
<li><strong>version</strong>: Model version, e.g. <code>3.9.1</code>.</li>
</ul>
<h2 id='getting-all-runs'>Getting all runs</h2>
<aside class="warning">
This endpoint is not yet available.
Email us at <a href='mailto:help@cloudrun.co'>help@cloudrun.co</a>
if you want this endpoint to be available sooner.
</aside>
<h2 id='get-a-specific-run'>Get a specific run</h2><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">cloudrun</span> <span class="kn">import</span> <span class="n">Run</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">Run</span><span class="p">(</span><span class="s">'https://api.cloudrun.co/v1'</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl https://api.cloudrun.co/v1/runs/<span class="nv">$id</span> <span class="se">\</span>
    -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span>
</code></pre>
<p>This endpoint retrieves a specific WRF run that you own or have access to.</p>
<h3 id='url-parameters'>URL parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The id of the WRF run to retrieve</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<p>The response body contains the <code>Run</code> object.</p>
<h2 id='uploading-input-files'>Uploading input files</h2><pre class="highlight python tab-python"><code><span class="n">run</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="n">path_to_file</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span>/input <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     -F <span class="s2">"file=@</span><span class="nv">$path_to_file</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p><code>path_to_file</code> parameter must point to a valid input file, e.g. <code>wrfinput_d01</code>.</p>

<p>The response body will look like this, for example when uploading the WRF
namelist file namelist.input:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"file"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3d32942-b172-435d-9354-d49f4b1cfef8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"namelist.input"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">4438</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>where <code>id</code> is the id assigned to the uploaded input file.</p>
</blockquote>

<p>This endpoint lets you upload an input file to your run.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://api.cloudrun.co/v1/runs/{id}/input</code></p>
<h3 id='form-parameters-2'>Form parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>file</td>
<td>Path to a valid input file</td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique ID of your input file</td>
</tr>
<tr>
<td>name</td>
<td>File name</td>
</tr>
<tr>
<td>size</td>
<td>File size in bytes</td>
</tr>
</tbody></table>
<h2 id='uploading-input-files-from-url'>Uploading input files from URL</h2><pre class="highlight python tab-python"><code><span class="n">run</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url_to_file</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span>/input <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     -F <span class="s2">"url=</span><span class="nv">$url_to_file</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p><code>url_to_file</code> parameter must point to a valid input file
on the web, e.g. <code>wrfinput_d01</code>. This could be a file
hosted from an http or ftp server, or an AWS S3 bucket.</p>

<p>The response body will look like this, for example when uploading the WRF
namelist file namelist.input from url:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"file"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3d32942-b172-435d-9354-d49f4b1cfef8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"namelist.input"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">4438</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint lets you upload an input file from a remote URL to your run.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://api.cloudrun.co/v1/runs/{id}/input</code></p>
<h3 id='form-parameters-3'>Form parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>URL to a remote input file</td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique ID of your input file</td>
</tr>
<tr>
<td>name</td>
<td>File name</td>
</tr>
<tr>
<td>size</td>
<td>File size in bytes</td>
</tr>
</tbody></table>
<h2 id='selecting-your-compute-option'>Selecting your compute option</h2><pre class="highlight shell tab-shell"><code>curl -X PATCH <span class="k">${</span><span class="nv">CLOUDRUN_API_URL</span><span class="k">}</span>/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$CLOUDRUN_API_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
</code></pre>
<p>After you have uploaded a valid WRF namelist file (<code>namelist.input</code>),
Cloudrun server will parse the namelist and return a number of available
compute options in the response. Each option uses a different number of
parallel cores, and has different estimated time to completion and run price.</p>
<pre class="highlight json tab-json"><code><span class="s2">"compute_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"compute_option_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ee418969-e1de-4f44-b053-d8349baf01aa"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cores"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"compute_option_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d3762d0d-5a83-4b56-bd48-7b6f2467efea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cores"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.14"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"compute_option_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bb20dc53-50ee-4178-ad4a-c14518b8420d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cores"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"compute_option_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06f75013-84db-42c3-80b4-e4fa733df6ea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cores"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"compute_option_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a3ecb91-a0c7-4f51-85c1-b62e7a7bf69d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cores"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.21"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h2 id='starting-your-wrf-run'>Starting your WRF run</h2><pre class="highlight python tab-python"><code><span class="n">run</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">cores</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span>/start <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     -F <span class="s2">"cores=32"</span>

<span class="c"># or</span>

curl -X POST https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span>/start <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     -F <span class="s2">"selected_compute_option=</span><span class="nv">$compute_option_id</span><span class="s2">"</span>
</code></pre>
<p>Use this endpoint to start your run once it has been properly configured
and all the input files have been uploaded.</p>

<p>There are two different ways you can start your run:</p>

<ol>
<li>By passing a number of parallel cores (<code>cores</code>) in the request body.</li>
<li>By passing a valid compute option ID in the request body.</li>
</ol>

<aside class="notice">
This endpoint can be used only after uploading all the required input files.
</aside>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://api.cloudrun.co/v1/wrf/{id}/start</code></p>
<h3 id='form-parameters-4'>Form parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cores</td>
<td>Number of compute cores to use</td>
</tr>
</tbody></table>
<h3 id='response-5'>Response</h3>
<p>The response body contains the <code>Run</code> JSON object.</p>
<h2 id='stopping-your-wrf-run'>Stopping your WRF run</h2><pre class="highlight python tab-python"><code><span class="n">run</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span>/stop <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span>
</code></pre>
<p>Use this endpoint to stop a currently active run.
This should be necessary only if you want to stop your run before it completes.</p>

<aside class="notice">
This endpoint can be used only after calling the `start` endpoint.
</aside>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://api.cloudrun.co/v1/runs/{id}/stop</code></p>
<h3 id='response-6'>Response</h3>
<p>The response body contains the <code>Run</code> JSON object.</p>
<h2 id='deleting-your-wrf-run'>Deleting your WRF run</h2><pre class="highlight python tab-python"><code><span class="n">run</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X DELETE https://api.cloudrun.co/v1/runs/<span class="k">${</span><span class="nv">id</span><span class="k">}</span> <span class="se">\</span>
     -H <span class="s2">"Authorization: Bearer </span><span class="nv">$token</span><span class="s2">"</span>
</code></pre>
<p>Use this endpoint to delete the output files from your run.
You will still be able to access the metadata of your run.</p>

<aside class="warning">
This request cannot be undone.
</aside>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>DELETE https://api.cloudrun.co/v1/runs/{id}</code></p>
<h3 id='response-7'>Response</h3>
<p>The response body contains the <code>Run</code> JSON object.</p>
<h1 id='errors'>Errors</h1>
<p>The Cloudrun API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is incorrect.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API token is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The resource requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
